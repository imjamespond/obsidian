 - [Ubuntu16](https://blog.csdn.net/davidhzq/article/details/102991577)
`/etc/network/interfaces`
```
# interfaces(5) file used by ifup(8) and ifdown(8)
auto lo
iface lo inet loopback
#上面的内容是原来就有的，下面是新加的内容。
#下面是要设置的网卡名字。
auto ens33
# static表示设置静态IP，动态IP用dhcp，一般默认就是dhcp状态
iface ens33 inet static
#IP地址
address 192.168.1.32
#子网掩码
netmask 255.255.255.0
#网关
gateway 192.168.1.1
#广播地址，可以不设
broadcast 192.168.1.255
#结束，#号内容是给你们看的，看完就可以删除，没啥用
```

**修改DNS**  
ctrl+alt+t 打开终端，输入命令`sudo gedit /etc/resolv.conf`打开配置文件。
```
# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
nameserver 127.0.1.1 
#上面的内容是原来就有的，下面是新加的内容。
nameserver 114.114.114.114
nameserver 8.8.8.8
#结束-------------------------------------
```

3、重启服务的方法
重起网络服务：
输入命令：sudo /etc/init.d/networking restart
或输入命令：sudo service networking restart
 个别系统重启服务后地址不变，这一般是缓存的问题，可以通过ip命令刷新一下缓存。
重启DNS服务：
输入命令：sudo /etc/init.d/resolvconf restart
或输入命令：sudo service resolvconf restart









三、Server版方法-Ubuntu18
Ubuntu18修改IP和DNS的方法和Ubuntu16有较大差别，Ubuntu18是通过netplan来管理网络地址的。
1）、ctrl+alt+t 打开终端，进入/etc/netplan/目录，找到yaml文件，如下：
```
hzq@ubuntu:~$ ls /etc/netplan/
01-network-manager-all.yaml
hzq@ubuntu:~$ cat /etc/netplan/01-network-manager-all.yaml
# Let NetworkManager manage all devices on this system
network:
  version: 2
  renderer: NetworkManager
hzq@ubuntu:~$ 
``` 
上面是文件原来的内容，
输入命令sudo gedit /etc/netplan/01-network-manager-all.yaml打开配置文件，
按照下面示例添加或修改内容：
```
network:
  version: 2
  renderer: networkd
  ethernets:
    #网卡名称，先用ifconfig查清楚要更改的网卡名字
    ens33:
       addresses: [192.168.1.36/24]
       gateway4: 192.168.1.1
       nameservers:
           addresses: [8.8.8.8]
``` 
==启用配置信息==。
`sudo netplan apply`

再用ifconfig查看，网卡地址已经变更过来，个别版本没生效的重启一下系统吧。
有些文章让你执行netplan apply的时候前面没有加sudo，这样一般不会真正生效的，要在前面加sudo或者直接在root下执行。

Ubuntu18更改IP地址、DNS等信息在这一个yaml文件更改即可，也挺方便的，不过由于18版开始变动比较大可能以前的使用者会比较迷茫，当然你也可以改回到以前的方法，不过要重装一些以前的网络管理组件。

四、命令行进行设置
命令直接修改的方式一般是临时方法，重启后会失效。
【当然所谓命令行方法只是一种叫法，在本文只是表示下面这种方法而已。并不是说所有命令行的方法都是临时性的】

1、设置IP地址和子网掩码
`sudo ifconfig ens33 192.168.1.31 netmask 255.255.255.0`
上面表示将网卡ens33的IP设置为：192.168.1.31，子网掩码改为：255.255.255.0

2、设置网关
`sudo route add default gw 192.168.1.1`

这里是添加一个默认网关的意思，并不是直接修改原来的网关，所以不要多次执行上述命令！

3、设置DNS
 无论是Ubuntu16还是Ubuntu18目前没有特别通用，特别快速的命令来直接设置DNS信息。
 要么需要修改配置文件，可参考上文；
 要么某些命令需要在特定条件下才能执行，比如nmcli、systemd等系列的工具集，并且操作有一定复杂度。
 所以建议还是按上文方法修改比较好。

4.重启网络服务
在这种方法中，IP和网关设置都是即时生效的，并不需要重启网络服务。
如果需要重启DNS服务，请按上文方法进行。

最后
 配置IP、DNS、网关的方法：server和desktop有区别；不同版本号有区别；Ubuntu的DNS本身有多个配置文件。要找到适合自己系统的方法。
 除了上文的方法，当然还有其他的方法也可以进行IP、网关、DNS的修改，但是用的比较少，适合特定人群。比如nmcli、systemd、或直接修改底层相关的.network文件、或者通过脚本等等。 

--- 
报错的意思是说，gateway4 已被弃用，请改用默认路由。默认路由就是通过 routes 配置 IP。

修改网络配置如下：

```
network:
  ethernets:
    eth0:
      dhcp4: false
      addresses: [192.168.1.11/24]
      optional: true
      routes:
        - to: default
          via: 192.168.1.1
      nameservers:
        addresses: [192.168.1.1]
  version: 2
```
———————————————— 