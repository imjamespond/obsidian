【分块加载大数据【渡一教育】】 https://www.bilibili.com/video/BV1JQYaePEfZ/?share_source=copy_web&vd_source=65d7c54e9b8b7363bc20d2b5b5809ffb

```js
async function loadNovel() {
  const url = 'https://duyi-static.oss-cn-beijing.
  aliyuncs.com/files/novel.txt';
  const resp = await fetch(url);
  const reader = resp.body.getReader();
 // const { value, done } = await reader.read();
 // console.log(value);
  const decoder = new TextDecoder();
  for (;;) {
    const { value, done } = await reader.read(); 
    if (done) {
      break;
    }
    const text = decoder.decode (value);
    console.log(text);
  }
}
loadNovel();
```

```js
let remainChunk = new Uint8Array(0)

const lastIndex = value.lastIndexOf
const chunk = value.slice(0, lastIn
const readChunk = new Uint8Array (rem + chunk.length)
readChunk.set(remainChunk);
readChunk.set(chunk, remainChunk.ler
remainChunk = value.slice(lastIndex
const text = decoder.decode (readChui
console.log(text);
```